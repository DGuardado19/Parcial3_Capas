<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Materias Cursadas</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" href="css/style.css">
 <!-- Bootstrap core JavaScript-->
   <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Page level plugin JavaScript-->
      <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
  <script src="vendor/datatables/dataTables.bootstrap4.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin.min.js"></script>

  <!-- Demo scripts for this page-->
  <script src="js/demo/datatables-demo.js"></script>
</head>
<script type="text/javascript">	

	$(document).ready(function(){
		var val1 = document.getElementById("boton").value;
		var val2 = document.getElementById("boton2");
		
		val2.href = "/registrarMateriaCursada?id=" + val1;
		
		var table = $('#tablaClientes').DataTable( {
			"ordering": false,
	        "processing": true,
	        "serverSide": true,
	        "ajax": "./cargarMateriasCursadas?id="+$('#boton').val(),
	        "language": {
	            "url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"
	        },
	        "pageLength": 5,
	        "columnDefs": [ {
	            "targets": 0,
	            "data": null,
	            "searchable": false,
	            "defaultContent": "<button class='btn btn-info' title='Editar Materia' id='i2'><i class='fa fa-pencil-alt'></i></button>"
	        }]
	    });
		$('#tablaClientes tbody').on( 'click', '#i', function () {
	        var data = table.row( $(this).parents('tr') ).data();
	        	location.href = './registrarMateriaAlumno?id=' + data[0];
	    } );
		$('#tablaClientes tbody').on( 'click', '#i2', function () {
	        var data = table.row( $(this).parents('tr') ).data();
	        	location.href = './editarMateriaAlumno?id=' + data[0];
	    } );
	});
	
</script>
<body class="tablas-ventana">

	<nav class="navbar navbar-expand-lg navbar-dark bg-menu"> 
	  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"><img alt="" src="img/logo.jpeg"></span>
	  </button>
	  <div class="collapse navbar-collapse" id="navbarNavDropdown">
	    <ul class="navbar-nav">
	      <li class="nav-item">
	        <a class="nav-link" href="tablaExpediente">Regresar</a>
	      </li>
	    </ul>
	  </div>
	</nav>
	
	
	<div class="container tablas center">
		<h1>Materias Cursadas</h1>
			<input type="hidden" th:value="${id}" id="boton">
		<div class="nuevoDato">
			<a class="btn color-linkSesion" id="boton2">Agregar Nueva Materia</a>
		</div>
		<table class="table" id="tablaClientes">
		  <thead>
		    <tr>
		      <th scope="col">Acción</th>
		      <th scope="col">Materia</th>
		      <th scope="col">Año</th>
		      <th scope="col">Ciclo</th>
		      <th scope="col">Nota</th>
		      <th scope="col">Resultado</th>
		    </tr>
		  </thead>
		  </table>
		  </div>

</body>
</html>