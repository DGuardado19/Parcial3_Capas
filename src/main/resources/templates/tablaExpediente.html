<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Expedientes</title>

<!-- Hojas de estilo de bootstrap y propio -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
	integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
	crossorigin="anonymous">
<link rel="stylesheet" href="css/style.css">

<!-- Bootstrap core JavaScript-->
<link href="css/fontawesome-free/css/all.min.css" rel="stylesheet"
	type="text/css">
<script src="js/bootstrap.bundle.min.js"></script>

<!-- Page level plugin JavaScript-->
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script
	src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script src="js/dataTables.bootstrap4.js"></script>


</head>

<body class="tablas-ventana">
	
	<nav class="navbar navbar-expand-lg navbar-dark bg-menu">
		<a class="navbar-brand" href="#"><img alt="" src="img/logo.jpeg"></a>
		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"><img alt=""
				src="img/logo.jpeg"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNavDropdown">
			<ul class="navbar-nav">
		      <li class="nav-item active">
		        <a class="nav-link" href="busquedaAlumno">Regresar</a>
		      </li>
		    </ul>
		</div>
		<div class="form-inline">
			<a class="btn btn-secondary btn-light" type="button"
				aria-haspopup="true" aria-expanded="false" href="/logout">
				Cerrar Sesi√≥n </a>
		</div>
	</nav>
	
	<input type="hidden" th:value="${busqueda}" id="boton">
	<input type="hidden" th:value="${busqueda2}" id="boton2">
	
	<div class="container tablas center">
		<h1>Expedientes</h1>
		<table class="table" id="tablaClientes">
		  <thead>
		    <tr>
		    <th style="width: 130px">Acci&oacute;n</th>
		      <th scope="col">Nombre</th>
		      <th scope="col">Apellido</th>
			  <th scope="col">Materias Aprobadas</th>
			  <th scope="col">Materias Reprobadas</th>
			  <th scope="col">Promedio</th>
		    </tr>
		  </thead>
		</table>
	</div>

</body>
<script type="text/javascript">
	$(document).ready(function(){
		var table = $('#tablaClientes').DataTable( {
			"dom": '<"top"l>rt<"bottom"p><"clear">',
			"ordering": false,
	        "processing": true,
	        "serverSide": true,
	        "ajax": "./cargarEstudiantes?variable="+$('#boton').val()+"&criterio="+$('#boton2').val(),
	        "language": {
	            "url": "//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"
	        },
	        "pageLength": 5,
	        "columnDefs": [ {
	            "targets": 0,
	            "data": null,
	            "searchable": false,
	            "defaultContent": "<button class='btn btn-info' title='Editar cliente' id='i2'><i class='fas fa-search'></i></button><button class='btn btn-info' title='Editar cliente' id='i'><i class='fa fa-pencil-alt'></i></button> "
	        }]
	    });
		$('#tablaClientes tbody').on( 'click', '#i2', function () {
	        var data = table.row( $(this).parents('tr') ).data();
	        	location.href = './editarEstudiante?id=' + data[0];
	    } );
		$('#tablaClientes tbody').on( 'click', '#i', function () {
	        var data = table.row( $(this).parents('tr') ).data();
	        	location.href = './materiasCursadas?id='+ data[0];
	    } );
	});
</script>
</html>